---
title: Quickstart
description: get started with aquinas
icon: CircleQuestionMark
---

Aquinas is a dependency inversion library that uses **functions and objects** instead of **classes and decorators**.

## Installation

```package-install
aquinas
```

## Concepts

If you never heard about IoC, DI or Clean Architecture, you might want to check some resources about it first, but here is a quick overview of the workflow we will follow:

1. Create an interface representing some service (e.g. `IUserRepository`).

2. Bind that interface to a reference (e.g. `UserRepositoryReference`).

3. Create an injectable that implements that reference (e.g. `UserRepository`).

4. Create a dock to hold that injectable (e.g. `UserDock`).

## Create your first references

Usually, references go into the Domain layer, where your models are defined.

<Tabs groupId="references" persist items={["Typescript", "Javascript"]}>
    <Tab value="Typescript">
        ```ts title="user.i-repository.ts"
        import { reference } from "aquinas";
        import type { User } from "./user";

        export interface IUserRepository {
            createUser(user: User): Promise<void>;
        }

        export const UserRepositoryReference = reference<IUserRepository>("UserRepository");
        ```

        ```ts title="register-user.i-usecase.ts"
        import { reference } from "aquinas";
        import type { User } from "./user";

        export interface IRegisterUserUsecase {
            execute(user: User): Promise<User>;
        }

        export const RegisterUserUsecaseReference = reference<IRegisterUserUsecase>("RegisterUserUsecase");
        ```
    </Tab>

    <Tab value="Javascript">
        ```js title="user.i-repository.js"
        import { reference } from "aquinas";

        /**
         * @typedef {Object} User
         * @property {string} id
         * @property {string} name
         * @property {string} email
         */

        /**
         * @typedef {Object} IUserRepository
         * @property {(user: User) => Promise<void>} createUser
         */
        export const UserRepositoryReference = reference("UserRepository");
        ```

        ```js title="register-user.i-usecase.js"
        import { reference } from "aquinas";

        /**
         * @typedef {Object} User
         * @property {string} id
         * @property {string} name
         * @property {string} email
         */

        /**
         * @typedef {Object} IRegisterUserUsecase
         * @property {(user: User) => Promise<User>} execute
         */
        export const RegisterUserUsecaseReference = reference("RegisterUserUsecase");
        ```
    </Tab>
</Tabs>

## Create your first injectable

<Tabs groupId="injectables" persist items={["Typescript", "Javascript"]}>
    <Tab value="Typescript">
        ```ts title="register-user.usecase.ts"
        import { injectable } from "aquinas";
        import { RegisterUserUsecaseReference } from "./register-user.i-usecase";
        import { UserRepositoryReference } from "./user.i-repository";

        export const RegisterUserUsecase = injectable(RegisterUserUsecaseReference)
            .deps({
                userRepository: UserRepositoryReference,
            })
            .implements(({ userRepository }) => ({
                async execute(user) {
                    await userRepository.createUser(user);
                    return user;
                }
            }));
        ```

        ```ts title="user.repository.ts"
        import { injectable } from "aquinas";
        import { UserRepositoryReference } from "./user.i-repository";

        export const UserRepository = injectable(UserRepositoryReference)
            .implements(() => ({
                async createUser(user) {
                    // persist user to database
                    console.log('Creating user:', user);
                },
            }));
        ```
    </Tab>

    <Tab value="Javascript">
        ```js title="register-user.usecase.js"
        import { injectable } from "aquinas";
        import { RegisterUserUsecaseReference } from "./register-user.i-usecase.js";
        import { UserRepositoryReference } from "./user.i-repository.js";

        export const RegisterUserUsecase = injectable(RegisterUserUsecaseReference)
            .deps({
                userRepository: UserRepositoryReference,
            })
            .implements(({ userRepository }) => ({
                async execute(user) {
                    await userRepository.createUser(user);
                    return user;
                }
            }));
        ```

        ```js title="user.repository.js"
        import { injectable } from "aquinas";
        import { UserRepositoryReference } from "./user.i-repository.js";

        export const UserRepository = injectable(UserRepositoryReference)
            .implements(() => ({
                async createUser(user) {
                    // persist user to database
                    console.log('Creating user:', user);
                },
            }));
        ```
    </Tab>
</Tabs>

If you just copied over the code above, you will not get any errors at first, but if you try to run your app, you will get an error saying that `UserRepository` is not registered.

That's because we haven't created the `UserRepository` injectable yet (which we just did above).

## Register your injectables in a dock

A dock is what holds your injectables and allows you to merge multiple docks together.

<Tabs groupId="docks" persist items={["Typescript", "Javascript"]}>
    <Tab value="Typescript">

    ```ts title="user.dock.ts"
    import { dock } from "aquinas";
    import { UserRepository } from "./core/user.repository";
    import { RegisterUserUsecase } from "./core/register-user.usecase";

    const UserDock = dock();

    UserDock.register(UserRepository, RegisterUserUsecase);

    export { UserDock };
    ```

    ```ts title="app.dock.ts"
    import { dock } from "aquinas";
    import { UserDock } from "./user.dock";

    const AppDock = dock();

    AppDock.merge(UserDock);
    // you can merge more docks here

    export { AppDock };
    ```

    </Tab>

    <Tab value="Javascript">

    ```js title="user.dock.js"
    import { dock } from "aquinas";
    import { UserRepository } from "./core/user.repository.js";
    import { RegisterUserUsecase } from "./core/register-user.usecase.js";

    const UserDock = dock();

    UserDock.register(UserRepository, RegisterUserUsecase);

    export { UserDock };
    ```

    ```js title="app.dock.js"
    import { dock } from "aquinas";
    import { UserDock } from "./user.dock.js";

    const AppDock = dock();

    AppDock.merge(UserDock);
    // you can merge more docks here

    export { AppDock };
    ```

    </Tab>
</Tabs>

Usually you will have multiple docks in your application, one for each module or feature, so you will need to merge them together in your app's main dock.

## Running your app

Assuming you created controllers or other entrypoints following the same steps, you will just need to resolve them from the `AppDock` and start your app.

<Tabs groupId="main" persist items={["Typescript", "Javascript"]}>

<Tab value="Typescript">

```ts title="main.ts"
import { Hono } from 'hono'
import { serve } from '@hono/node-server'
import { AppDock } from "./app.dock";
import { UserControllerReference } from "./domain/user.controller";

const app = new Hono();

const controllers = AppDock.get({
    user: UserControllerReference,
});

app.get("/users", controllers.user.get);

serve(app)
```

</Tab>

<Tab value="Javascript">

```js title="main.js"
import { Hono } from 'hono'
import { serve } from '@hono/node-server'
import { AppDock } from "./app.dock.js";
import { UserControllerReference } from "./domain/user.controller.js";

const app = new Hono();

const controllers = AppDock.get({
    user: UserControllerReference,
});

app.get("/users", controllers.user.get);

serve(app)
```

</Tab>

</Tabs>

## Final Structure

import { File, Folder, Files } from 'fumadocs-ui/components/files';

This will totally depend on your project structure, but here is a simple example of how your project could look like after following this guide:

<Files>
  <Folder name="app" defaultOpen>
    <File name="app.dock.ts" />
    <File name="main.ts" />
  </Folder>
  <Folder name="domain" defaultOpen>
      <Folder name="user" defaultOpen>
        <File name="user.i-repository.ts" />
        <File name="register-user.i-usecase.ts" />
        <File name="user.controller.ts" />
      </Folder>
  </Folder>
  <Folder name="core" defaultOpen>
        <File name="register-user.usecase.ts" />
  </Folder>
  <Folder name="infra" defaultOpen>
        <File name="user.repository.ts" />
   </Folder>
   <Folder name="presentation" defaultOpen>
        <File name="user.controller.ts" />
   </Folder>
</Files>